<!-- Tabbed Work Area: 분석에 필요한 기능을 탭으로 구분 -->
<div class="card-custom mb-4 work-tabs-card" role="region" aria-label="작업 선택">
    <div class="card-body p-0">
        <ul class="nav nav-tabs nav-tabs-custom px-3 pt-3" id="workTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="tab-target-btn" data-bs-toggle="tab" data-bs-target="#tab-target-pane"
                    type="button" role="tab" aria-controls="tab-target-pane" aria-selected="true">
                    <i class="bi bi-graph-up-arrow me-2"></i>타겟 분석
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="tab-generate-btn" data-bs-toggle="tab" data-bs-target="#tab-generate-pane"
                    type="button" role="tab" aria-controls="tab-generate-pane" aria-selected="false">
                    <i class="bi bi-pencil-square me-2"></i>새 포스트 작성
                </button>
            </li>
        </ul>
        <div class="tab-content p-4" id="workTabsContent">
            <!-- Tab 1: 타겟 분석 -->
            <div class="tab-pane fade show active" id="tab-target-pane" role="tabpanel" aria-labelledby="tab-target-btn">
                <p class="text-muted small mb-3">키워드·오디언스·경쟁자를 분석한 뒤, 결과를 새 포스트 작성에 바로 적용할 수 있습니다.</p>
                <div class="row g-4">
                    <div class="col-md-12">
                        <label for="target_keyword" class="form-label-custom">분석할 타겟 키워드 또는 주제</label>
                        <input type="text" class="form-control-custom" id="target_keyword"
                            placeholder="예: 인공지능, 마케팅 전략, 타겟 고객 등"
                            aria-label="타겟 키워드 입력">
                    </div>
                    <div class="col-md-6">
                        <label for="target_type" class="form-label-custom">분석 유형</label>
                        <select class="form-control-custom" id="target_type" aria-label="분석 유형 선택">
                            <option value="keyword">키워드 분석</option>
                            <option value="audience">오디언스 분석</option>
                            <option value="competitor">경쟁자 분석</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label for="ai_provider" class="form-label-custom">AI 제공자</label>
                        <select class="form-control-custom" id="ai_provider" aria-label="AI 제공자 선택">
                            <option value="openai">OpenAI</option>
                            <option value="gemini">Gemini</option>
                        </select>
                    </div>
                    <div class="col-md-12">
                        <label for="additional_context" class="form-label-custom">추가 컨텍스트 (선택사항)</label>
                        <textarea class="form-control-custom" id="additional_context" rows="3"
                            placeholder="추가로 제공할 컨텍스트 정보를 입력하세요..."
                            aria-label="추가 컨텍스트"></textarea>
                    </div>
                    <div class="col-md-12">
                        <button type="button" class="btn-custom btn-primary" id="analyze_target_btn"
                            aria-label="타겟 분석 시작">
                            <i class="bi bi-search me-2"></i>분석 시작
                        </button>
                    </div>
                </div>
                <!-- 로딩: 탭 내부에 두고, 완료 시 결과는 하단 통합 결과로 이동 -->
                <div id="target_analysis_loading" class="text-center mt-4" style="display: none;" aria-live="polite">
                    <div class="spinner-border text-primary" role="status"><span class="visually-hidden">분석 중...</span></div>
                    <p class="mt-2 mb-0">AI가 타겟을 분석하고 있습니다...</p>
                </div>
            </div>
            <!-- Tab 2: 새 포스트 작성 -->
            <div class="tab-pane fade" id="tab-generate-pane" role="tabpanel" aria-labelledby="tab-generate-btn">
                <p class="text-muted small mb-3"><i class="bi bi-keyboard me-1"></i> 단축키: <kbd>Ctrl</kbd>+<kbd>Enter</kbd> 생성 · <kbd>Esc</kbd> 취소</p>
                <div id="generator-form">
                    {% include 'components/_generator_form_body.html' %}
                </div>
            </div>
        </div>
    </div>
</div>
