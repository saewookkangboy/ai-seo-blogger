# AI SEO Blogger — 전체 기능 사양 (개요)

## 개요

- **목적**: AI를 활용한 SEO 최적화 블로그 포스트 자동 생성·관리·배포 파이프라인 제공
- **범위**:
  - **핵심 기능**: 키워드 기반 해외 자료 수집, 번역, AI 콘텐츠 생성, [SEO·GEO·AIO](#glossary--definitions) 최적화
  - **통합**: 관리자 대시보드, Google Drive/Docs 연동
  - **산출물**: API 문서, 참조 문서, 설정 템플릿(.env.example), 스펙·체크리스트 파일(.spec-kit, TODO, .project-data/todos.json)
- **대상 사용자**: 콘텐츠 마케터, 블로거, SEO 담당자

## 산출물 (Deliverables)

검증 기준과 직접 대응하는 문서·설정·스펙 파일을 범위에 포함한다.

| 산출물 | 용도 |
|--------|------|
| `.env.example` | 환경 변수 템플릿(실제 키 미포함, NFR-001 검증) |
| `/docs` (FastAPI) | API 스키마·엔드포인트 문서 (NFR-002 검증) |
| `reference.md` | [SEO·GEO·AIO](#glossary--definitions) 체크리스트·템플릿·메타·JSON-LD 검토용 |
| `TODO.md` | 할 일 목록(스펙 변경 이력과 정합성 유지) |
| `.project-data/todos.json` | 구조화된 To-do 데이터(스펙 변경 이력과 정합성 유지) |
| `.spec-kit/03-content-creation.md` | 콘텐츠 생성 요구사항·체크리스트(AI SEO·[GEO·AIO](#glossary--definitions)·시맨틱 HTML·메타 160자 반영) |

## Glossary / Definitions

| 용어 | 의미 | 범위 |
|------|------|------|
| **SEO** | Search Engine Optimization (검색 엔진 최적화) | 검색 결과 노출·순위·클릭을 위한 메타, 키워드, 구조·가독성 등 콘텐츠·기술 최적화 |
| **GEO** | Generative Engine Optimization (생성형 엔진 최적화) | AI/생성형 검색·답변(예: SGE, ChatGPT 검색)에 답이 인용·요약되도록 하는 콘텐츠·신호 최적화 |
| **AIO** | Answer Engine Optimization (답변 엔진 최적화) | 음성/챗봇/요약 등 “답변” 형태로 제공되는 검색·엔진에 맞춘 구조·요약·엔티티·FAQ 등 최적화 |

이 문서에서 **SEO**, **GEO**, **AIO**는 위 정의와 범위를 따른다.

## 요구사항

### 기능 요구사항

| ID | 요구사항 | 상태 |
|----|----------|------|
| FR-001 | 키워드 입력 기반 블로그 포스트 생성 (OpenAI GPT-4, Gemini 2.0 Flash) | ✅ |
| FR-002 | 다중 번역 (DeepL, Gemini, OpenAI) 및 자동 번역 파이프라인 | ✅ |
| FR-003 | 웹 크롤링(일반/Selenium/Google 스타일) 및 자료 수집 — 상세는 [윤리적 크롤링](#ethical-crawling) 참조 | ✅ |
| FR-003.1 | robots.txt·sitemap 준수 | ✅ |
| FR-003.2 | 설정 가능한 속도 제한·동시성 제어 | ✅ |
| FR-003.3 | 스크래핑 전 대상 사이트 이용약관 확인/동의 | ✅ |
| FR-003.4 | 법적·준수 노트(저작권·데이터보호·공정이용) 및 정책 플래그 | ✅ |
| FR-004 | SEO 분석·키워드 추출·밀도·가독성 점수 | ✅ |
| FR-005 | 스트리밍/파이프라인 생성 (generate-post-stream, generate-post-pipeline, robust-stream) | ✅ |
| FR-006 | 포스트 CRUD, 검색, 벌크 삭제/아카이브, 내보내기/가져오기(XLSX) | ✅ |
| FR-007 | 키워드 목록·벌크 추가/삭제/비활성화·내보내기 | ✅ |
| FR-008 | AI 윤리 평가(7원칙: 편향, 공정성, 투명성, 프라이버시, 해로운 콘텐츠, 정확성, 설명가능성) | ✅ |
| FR-009 | 출처·인용 분석(URL 추출/검증, 신뢰도, 인용 형식, 종합 점수) | ✅ |
| FR-010 | 타겟 분석(target_analyzer) 및 키워드 기반 생성 | ✅ |
| FR-011 | 관리자 대시보드(포스트/키워드/통계, API 키 관리) | ✅ |
| FR-012 | Google Drive 백업·내보내기·폴더 생성·연동 테스트 — OAuth 플로우·스코프·토큰 저장은 **보안 요구사항** 참조 | ✅ |
| FR-013 | Google Docs Archive·문서 생성·목록/삭제 — OAuth 플로우·스코프·토큰 저장은 **보안 요구사항** 참조 | ✅ |
| FR-014 | 뉴스 아카이브 수집·카테고리·요약·삭제 | ✅ |
| FR-015 | 기능 업데이트 이력·통계·트렌드·새로고침 API | ✅ |
| FR-016 | 콘텐츠 개선·제안(improve-content, improve-content-suggestion) | ✅ |
| FR-017 | 실시간/대시보드 통계, 성능/시스템 상태, 키워드 통계 | ✅ |
| FR-018 | AI 요약·신뢰도(ai-summary, ai-trust) 엔드포인트 | ✅ |
| FR-019 | 아카이브 문서 목록/생성/삭제 (archive/documents) | ✅ |
| FR-020 | 로그인·세션·관리자 인증 — 인증·권한·RBAC 상세는 아래 **보안 요구사항** 참조 | ✅ |
| FR-021 | 콘텐츠 생성 품질: AI [SEO](#glossary--definitions)·[GEO](#glossary--definitions)·[AIO](#glossary--definitions) 체크리스트 반영, 시맨틱 HTML·메타 160자 (03-content-creation) | ✅ |

### 윤리적 크롤링 (Ethical Crawling)

크롤러 모듈(일반/Selenium/Google 스타일 등)은 아래 네 가지 안전장치를 각각 설정·검증할 수 있어야 한다. 상세 검증 기준은 [검증 기준](#검증-기준)의 FR-003.x 항목을 참조한다.

- [ ] **FR-003.1** — **robots.txt·sitemap 준수**: 대상 도메인의 robots.txt 및 sitemap 규칙을 존중하고, 허용된 경로·주기만 크롤링
- [ ] **FR-003.2** — **설정 가능한 속도 제한·동시성 제어**: 요청 간 지연, 동시 연결 수 등이 설정 가능하며 문서화됨
- [ ] **FR-003.3** — **스크래핑 전 이용약관 확인/동의**: 대상 사이트 ToS/이용약관 확인 절차 또는 동의 플로우가 존재하고, 스크래핑 전 적용 가능
- [ ] **FR-003.4** — **법적·준수 플래그**: 저작권·데이터보호·공정이용 등 법적·준수 노트 및 정책 플래그로 엄격 규칙 적용 옵션 제공

### 비기능 요구사항

| ID | 요구사항 | 상태 |
|----|----------|------|
| NFR-001 | API 키는 환경 변수(.env)·시크릿 관리, 코드/커밋에 노출 금지. 상세는 아래 **보안 요구사항** 참조 | ✅ |
| NFR-001a | 전송 암호화(HTTPS/TLS) — 모든 외부/관리자 API 및 대시보드 접근은 HTTPS/TLS 사용 | ✅ |
| NFR-001c | API 율 제한(rate limiting) — per-IP 및 per-API-key 기반 요청율 제한 적용 | ✅ |
| NFR-001d | API 키 로테이션·만료 — 로테이션·만료 정책 정의 및 만료 시 갱신 절차 문서화 | ✅ |
| NFR-002 | FastAPI REST API·에러 형식 일관성·문서화(/docs) | ✅ |
| NFR-003 | SQLite/PostgreSQL 지원·CRUD·인덱스·마이그레이션 가능 | ✅ |
| NFR-004 | 성능 모니터링·캐시(메모리/Redis)·백그라운드 큐·헬스체크 | ✅ |
| NFR-005 | 로깅·압축·에러 핸들링·진단(system_diagnostic) | ✅ |
| NFR-006 | 데이터 보존 — 포스트·키워드·아카이브·로그의 보존 기간 및 삭제/아카이빙 절차 명시 | ✅ |
| NFR-007 | 프라이버시 준수 — GDPR/CCPA 준수, 데이터 주체 요청 처리, PII 최소화 | ✅ |
| NFR-008 | 백업 및 재해 복구 — 백업 주기·보존·RTO·RPO 및 복구 절차 정의 | ✅ |
| NFR-009 | 확장성 — 예상 부하/동시 사용자 및 오토스케일·파티셔닝 전략 명시 | ✅ |
| NFR-010 | 가용성 — 가동률 SLA 및 고가용성·복제 요건 정의 | ✅ |
| NFR-011 | 데이터 암호화 — 전송 중(TLS)·저장 시(디스크/DB 암호화) 암호화 및 키 관리 정책 요구 | ✅ |

### 보안 요구사항

아래 요구사항은 **FR-020**(인증), **NFR-001·NFR-001a·NFR-001c·NFR-001d**(API 키·전송 암호화·율 제한·키 정책), **NFR-011**(저장 시 암호화), **FR-012**(Google Drive), **FR-013**(Google Docs)과 연계되어 검증·리뷰 시 해당 ID로 위치를 확인할 수 있다.

- **인증 (FR-020)**  
  - **메커니즘**: JWT 또는 세션 기반 인증 중 하나를 명시하여 적용. (구현 시 선택 사항 문서화)  
  - **비밀번호 정책**: 최소 길이·복잡도(대소문자·숫자·특수문자)·만료 주기·재사용 제한을 정책으로 정의.  
  - **MFA**: 관리자 계정에 대해 다중 인증(MFA/2FA) 지원을 요구사항으로 명시(선택 적용 가능).  
  - **참조**: FR-020 — 로그인·세션·관리자 인증과 동일 범위.

- **권한·인가 (FR-020)**  
  - **RBAC/권한 수준**: 관리자 대시보드(FR-011)에 대해 역할 기반 접근 제어(RBAC) 또는 권한 수준(예: admin, editor, viewer)을 정의하고, 인가 요구사항에서 이 수준을 참조.  
  - **참조**: FR-020 — 인증된 사용자에 대한 권한 검증과 연계.

- **암호화·전송 보안 (NFR-001a, NFR-011)**  
  - **HTTPS/TLS**: 모든 외부/관리자 API 및 대시보드 접근은 HTTPS/TLS를 사용해야 함.  
  - **데이터 저장 암호화**: 민감 데이터(API 키, OAuth 토큰, 사용자 자격 증명 등)는 저장 시(at-rest) 암호화를 적용해야 함.  
  - **참조**: NFR-001a(전송), NFR-011(저장 시·키 관리).

- **API 키 관리·율 제한·DoS 방어 (NFR-001, NFR-001c, NFR-001d)**  
  - **율 제한**: API에 대해 per-IP 및 per-API-key 기반 요청율 제한(rate limiting) 적용.  
  - **DoS 방어**: 과도한 요청·비정상 패턴에 대한 제한 및 차단 정책 명시.  
  - **키 정책**: API 키의 로테이션(rotation)·만료(expiry) 정책을 정의하고, 만료 시 갱신 절차 문서화.  
  - **참조**: NFR-001(환경 변수·시크릿·코드/커밋 노출 금지), NFR-001c(율 제한), NFR-001d(로테이션·만료).

- **OAuth (FR-012, FR-013)**  
  - **범위**: Google Drive(FR-012)·Google Docs Archive(FR-013) 연동에 사용하는 OAuth 플로우·스코프를 문서화.  
  - **플로우**: 인증 코드 플로우(또는 사용 중인 플로우) 명시, 리다이렉트 URI·상태 파라미터 등 보안 요구사항 준수.  
  - **스코프**: 요청하는 OAuth 스코프 목록과 최소 필요 범위 명시.  
  - **토큰**: 리프레시 토큰·액세스 토큰 만료 정책, 갱신(refresh) 절차 및 **안전한 토큰 저장**(암호화된 저장소·NFR-011 저장 시 암호화 적용) 요구.  
  - **참조**: FR-012(Google Drive), FR-013(Google Docs Archive) — 해당 기능의 OAuth 연동 검증 시 사용.

## 검증 기준

- [x] 모든 FR 항목이 해당 API/UI와 매핑되어 동작함
- [x] NFR-001: `.env.example`에만 placeholder, 실제 키 미포함; NFR-001a: HTTPS/TLS 적용; NFR-001c: 율 제한 적용; NFR-001d: 키 로테이션·만료 정책 문서화
- [x] NFR-002: `/docs`에서 주요 엔드포인트 스키마 확인 가능
- [x] SEO·GEO·AIO([Glossary](#glossary--definitions)) 체크리스트(reference.md)에 따른 템플릿·메타·JSON-LD 검토 가능
- [x] To-do(TODO.md / .project-data/todos.json)와 스펙 변경 이력 정합성 유지
- [x] 콘텐츠 생성 시 .spec-kit/03-content-creation.md 요구사항·체크리스트 반영
- [ ] **FR-003.1**: robots.txt·sitemap 준수 — [윤리적 크롤링](#ethical-crawling) 해당 항목 검증
- [ ] **FR-003.2**: 설정 가능한 속도 제한·동시성 제어 — [윤리적 크롤링](#ethical-crawling) 해당 항목 검증
- [ ] **FR-003.3**: 스크래핑 전 이용약관 확인/동의 — [윤리적 크롤링](#ethical-crawling) 해당 항목 검증
- [ ] **FR-003.4**: 법적·준수 플래그(저작권·데이터보호·공정이용) — [윤리적 크롤링](#ethical-crawling) 해당 항목 검증
- [ ] **보안**: FR-020(인증·RBAC), NFR-001(API 키·시크릿), NFR-001a(HTTPS/TLS), NFR-001c(율 제한), NFR-001d(키 로테이션·만료), NFR-011(저장 시 암호화), FR-012·FR-013(OAuth 플로우·스코프·토큰 저장)이 보안 요구사항 섹션과 일치하는지 검토 가능

## 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|-----------|
| 2025-02-03 | 0.2 | dev-agent-kit 적용, 전체 기능 사양 초안(FR-001~FR-021, NFR-001~NFR-005), 콘텐츠 생성 사양(03-content-creation) 참조 및 검증 기준 보강(FR-021: AI SEO·GEO·AIO 체크리스트·시맨틱 HTML·메타 160자 반영) |
| 2025-02-03 | 0.3 | FR-003 존중 크롤링 요건 확장: robots.txt·sitemap, 속도/동시성 제어, 이용약관 확인, 법적·준수 플래그; 검증 기준에 크롤러 모듈 FR-003 준수 명시 |
| 2025-02-04 | 0.5 | FR-003 분리: FR-003.1(robots·sitemap), FR-003.2(속도·동시성), FR-003.3(이용약관 확인), FR-003.4(법적·준수 플래그); 윤리적 크롤링 하위 섹션 및 검증 기준 개별 항목 추가 |
| 2025-02-03 | 0.4 | 비기능 요구사항 NFR-006~NFR-011 추가: 데이터 보존, 프라이버시 준수, 백업·재해복구, 확장성, 가용성, 데이터 암호화 |
